{% if doc.sections.usage %}
Usage: {{ doc.sections.usage[0].program }} {{ doc.sections.usage[0].command }}
{% for usage in doc.sections.usage[1:] %}
       {{ usage.program }} {{ usage.command }}
{% endfor %}

{% endif %}
{% if doc.sections.desc %}
{% for desc in doc.sections.desc %}
{{ desc.text|smartwrap(0) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.option %}
Options:
{% for opt_group, opt_list in doc.sections.option|groupby('group', sort=False) %}
{% if opt_group %}
{{ ' ' * (context.indent / 2)|int }}{{ opt_group }}:
{% endif %}
{% for option in opt_list %}
{{ context.indent_str }}{{ "{sign:{padding}}"|format(sign=option.signature, padding=context.option_padding-1) }} {% if option.signature|length > context.option_padding-2 %}{{ '\n' + option.description|smartwrap(context.indent + context.option_padding) + '\n' }}{% else %}{{ option.description|smartwrap(context.indent + context.option_padding, indentfirst=False) + '\n' }}{% endif %}
{% endfor %}
{% if not loop.last %}{{ '\n' }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.env %}
Environment Variables:
{% for env in doc.sections.env %}
{{ context.indent_str }}{{ env.name }}
{{ env.description|smartwrap(context.indent*2) }}
{% endfor %}

{% endif %}
{% if doc.sections.file %}
Files:
{% for file in doc.sections.file %}
{{ context.indent_str }}{{ file.name }}
{{ file.description|smartwrap(context.indent*2) }}
{% endfor %}

{% endif %}
{% if doc.sections.exit %}
Exit Status:
{% for exit in doc.sections.exit %}
{{ context.indent_str }}{{ exit.code }}
{{ exit.description|smartwrap(context.indent*2) }}
{% endfor %}

{% endif %}
{% if doc.sections.stdin %}
Standard Input:
{% for stdin in doc.sections.stdin %}
{{ stdin.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.stdout %}
Standard Output:
{% for stdout in doc.sections.stdout %}
{{ stdout.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.stderr %}
Standard Error:
{% for stderr in doc.sections.stderr %}
{{ stderr.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.function %}
Functions:
{% for function in doc.sections.function %}
{% include "function.txt" with context %}
{% endfor %}

{% endif %}
{% if doc.sections.example %}
Examples:
{% for example in doc.sections.example %}
{{ context.indent_str }}{{ example.title }}
{% if example.code %}{{ "\n" + example.code|smartwrap(context.indent*2) + "\n\n" }}{% endif %}
{% if example.explanation %}
{{ example.explanation|smartwrap(context.indent*2) }}
{% endif %}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{#
{% if doc.sections.error %}
Errors:
{% for error in doc.sections.error %}
{{ error.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.bug %}
Bugs:
{% for bug in doc.sections.bug %}
{{ bug.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.caveat %}
Caveats:
{% for caveat in doc.sections.caveat %}
{{ caveat.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.author %}
Authors:
{% for author in doc.sections.author %}
{{ context.indent_str }}{{ author.text }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.copyright %}
Copyright:
{% for copyright in doc.sections.copyright %}
{{ copyright.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.license %}
License:
{% for license in doc.sections.license %}
{{ license.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.history %}
History:
{% for history in doc.sections.history %}
{{ history.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.note %}
Notes:
{% for note in doc.sections.note %}
{{ note.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.seealso %}
See Also:
{% for seealso in doc.sections.seealso %}
{{ seealso.text|smartwrap(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}
{% endif %}
#}
