{% if doc.sections.brief %}
NAME
{{ context.indent_str }}{{ doc.filename }} - {{ doc.sections.brief[0].text }}

{% endif %}
{% if doc.sections.usage %}
SYNOPSIS
{% for usage in doc.sections.usage %}
{{ context.indent_str }}{{ usage.program }} {{ usage.command }}
{% endfor %}

{% endif %}
{% if doc.sections.desc %}
DESCRIPTION
{% for desc in doc.sections.desc %}
{{ desc.text|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.option %}
OPTIONS
{% for option in doc.sections.option %}
{{ context.indent_str }}{% if option.short %}{{ option.short }}{% if option.long %},{% endif %} {% endif %}{% if option.long %}{{ option.long }} {% endif %}{% if option.positional %}{{ option.positional }}{% endif %}
{{ '\n' + option.description|smart_width(context.indent*2) + '\n' }}
{% endfor %}

{% endif %}
{% if doc.sections.env %}
ENVIRONMENT VARIABLES
{% for env in doc.sections.env %}
{{ context.indent_str }}{{ env.name }}
{{ env.description|smart_width(context.indent*2) }}
{% endfor %}

{% endif %}
{% if doc.sections.file %}
FILES
{% for file in doc.sections.file %}
{{ context.indent_str }}{{ file.name }}
{{ file.description|smart_width(context.indent*2) }}
{% endfor %}

{% endif %}
{% if doc.sections.exit %}
EXIT STATUS
{% for exit in doc.sections.exit %}
{{ context.indent_str }}{{ exit.code }}
{{ exit.description|smart_width(context.indent*2) }}
{% endfor %}

{% endif %}
{% if doc.sections.stdin %}

{% endif %}
{% if doc.sections.stdout %}

{% endif %}
{% if doc.sections.stderr %}

{% endif %}
{% if doc.sections.function %}
FUNCTIONS
{% for function in doc.sections.function %}
{% include "function.txt" with context %}
{% endfor %}

{% endif %}
{% if doc.sections.example %}
EXAMPLES
{% for example in doc.sections.example %}
{{ context.indent_str }}{{ example.title }}
{% if example.code %}{{ "\n" + example.code|smart_width(context.indent*2) + "\n\n" }}{% endif %}
{% if example.explanation %}
{{ example.explanation|smart_width(context.indent*2) }}
{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.error %}
ERRORS
{% for error in doc.sections.error %}
{{ error.description|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.bug %}
BUGS
{% for bug in doc.sections.bug %}
{{ bug.description|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.caveat %}
CAVEATS
{% for caveat in doc.sections.caveat %}
{{ caveat.description|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.author %}
AUTHORS
{% for author in doc.sections.author %}
{{ context.indent_str }}{{ author.text }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.copyright %}
COPYRIGHT
{% for copyright in doc.sections.copyright %}
{{ copyright.text|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.license %}
LICENSE
{% for license in doc.sections.license %}
{{ license.text|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.history %}
HISTORY
{% for history in doc.sections.history %}
{{ history.text|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.note %}
NOTES
{% for note in doc.sections.note %}
{{ note.text|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}

{% endif %}
{% if doc.sections.seealso %}
SEE ALSO
{% for seealso in doc.sections.seealso %}
{{ seealso.text|smart_width(context.indent) }}
{% if not loop.last %}{{ "\n" }}{% endif %}
{% endfor %}
{% endif %}
